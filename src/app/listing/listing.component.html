<h3>Historique des enregistrements</h3>

<p-table [value]="registers">
    <ng-template pTemplate="header">
        <tr>
            <th>Visiteur</th>
            <th>Manager</th>
            <th>Motif de visite</th>
            <th>Date d'arrivée</th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-register>
        <tr>
            <td>{{ register.firstname + " " + register.lastname }}</td>
            <td>
                {{ register.managerName }}
            </td>



            <td>{{ register.reason }}</td>
            <td>{{ register.startedAt }}</td>
            <td>
                <p-button (click)="showDialog(register)" icon="pi pi-eye" [link]="true"></p-button>
            </td>

            <p-dialog *ngIf="selectedRegister" header="Détails" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false"
                [resizable]="false">
                <p class="m-1">
                    <span style="font-weight: bold;">Visiteur : </span>{{ selectedRegister.firstname + " " + selectedRegister.lastname }}
                </p>
                <p class="m-1">
                    <span style="font-weight: bold;">Email : </span>{{ selectedRegister.mail }}
                </p>
                <p *ngIf="selectedRegister.phone" class="m-1">
                    <span style="font-weight: bold;">Téléphone : </span>{{ selectedRegister.phone }}
                </p>
                <p class="m-1">
                    <span style="font-weight: bold;">Organisation : </span>{{ selectedRegister.company }}
                </p>
                <p class="m-1">
                    <span style="font-weight: bold;">Manager : </span>{{ selectedRegister.managerName }}
                </p>

                <p class="m-1">
                    <span style="font-weight: bold;">Motif de visite : </span> {{ selectedRegister.reason }}
                </p>
                <p class="m-1">
                    <span style="font-weight: bold;">Date d'arrivée : </span> {{ selectedRegister.startedAt }}
                </p>
                <p class="m-1">
                    <span style="font-weight: bold;">Durée estimée : </span> {{ selectedRegister.estimateTime }}
                </p>
            </p-dialog>
        </tr>
    </ng-template>
</p-table>